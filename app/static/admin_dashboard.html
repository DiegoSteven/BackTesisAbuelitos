<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cognitive Games Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/static/admin_dashboard.css">
</head>

<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <span>‚ö°</span> Abuelitos Admin
        </div>
        <div class="nav-item active" onclick="switchTab('general')">üìä General</div>
        <div class="nav-item" onclick="switchTab('memory')">üß† Memory Game</div>
        <div class="nav-item" onclick="switchTab('abecedario')">üî§ Abecedario</div>
        <div class="nav-item" onclick="switchTab('paseo')">üö∂ Paseo</div>
        <div class="nav-item" onclick="switchTab('train')">üöÇ Trenes</div>
        <div class="nav-item" onclick="switchTab('usuarios')">üë• Por Usuario</div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="header">
            <h1 id="pageTitle">Dashboard General</h1>
            <button class="refresh-btn" onclick="loadAllData()">üîÑ Actualizar Datos</button>
        </div>

        <!-- TAB: GENERAL -->
        <div id="tab-general" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card gradient-1">
                    <h3>Total Usuarios</h3>
                    <div class="value" id="totalUsers">-</div>
                    <span class="trend">üë• Registrados</span>
                </div>
                <div class="stat-card gradient-2">
                    <h3>Partidas Hoy</h3>
                    <div class="value" id="gamesToday">-</div>
                    <span class="trend">üìÖ Actividad Diaria</span>
                </div>
                <div class="stat-card gradient-3">
                    <h3>Total Sesiones</h3>
                    <div class="value" id="totalGames">-</div>
                    <span class="trend">üéÆ Hist√≥rico</span>
                </div>
            </div>

            <div class="charts-row">
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Actividad Semanal</h3>
                    </div>
                    <canvas id="activityChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Distribuci√≥n por G√©nero</h3>
                    </div>
                    <canvas id="genderChart"></canvas>
                </div>
            </div>

            <div class="table-container">
                <h3>üë• √öltimos Usuarios Registrados</h3>
                <table id="usersTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Edad</th>
                            <th>G√©nero</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="4" class="loading">Cargando...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TAB: MEMORY GAME -->
        <div id="tab-memory" class="tab-content">
            <div class="stats-grid">
                <div class="stat-card gradient-2">
                    <h3>Accuracy Promedio</h3>
                    <div class="value" id="memAvgAccuracy">-%</div>
                    <span class="trend">üéØ Precisi√≥n Global</span>
                </div>
            </div>
            <div class="table-container">
                <h3>üß† √öltimas Sesiones (Memory Game)</h3>
                <table id="memoryTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Usuario</th>
                            <th>Dificultad</th>
                            <th>Pares</th>
                            <th>Accuracy</th>
                            <th>Tiempo</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="7" class="loading">Cargando...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="table-container">
                <h3>‚öôÔ∏è Configuraciones Actuales</h3>
                <table id="configTable">
                    <thead>
                        <tr>
                            <th>Usuario</th>
                            <th>Dificultad</th>
                            <th>Grid</th>
                            <th>Tiempo L√≠mite</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="4" class="loading">Cargando...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TAB: ABECEDARIO -->
        <div id="tab-abecedario" class="tab-content">
            <div class="stats-grid">
                <div class="stat-card gradient-3">
                    <h3>Palabras Completadas</h3>
                    <div class="value" id="abcCompleted">-</div>
                    <span class="trend">üî§ Total</span>
                </div>
            </div>
            <div class="table-container">
                <h3>üî§ √öltimas Sesiones (Abecedario)</h3>
                <table id="abecedarioTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Usuario</th>
                            <th>Palabra</th>
                            <th>Tiempo</th>
                            <th>Errores</th>
                            <th>Pistas</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="7" class="loading">Cargando...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TAB: PASEO -->
        <div id="tab-paseo" class="tab-content">
            <div class="stats-grid">
                <div class="stat-card gradient-1">
                    <h3>Total Sesiones</h3>
                    <div class="value" id="paseoTotal">-</div>
                    <span class="trend">üö∂ Paseo</span>
                </div>
                <div class="stat-card gradient-2">
                    <h3>Victorias</h3>
                    <div class="value" id="paseoVictorias">-</div>
                    <span class="trend">üèÜ Logros</span>
                </div>
                <div class="stat-card gradient-3">
                    <h3>Precisi√≥n Promedio</h3>
                    <div class="value" id="paseoPrecision">-%</div>
                    <span class="trend">üéØ Precisi√≥n</span>
                </div>
            </div>
            <div class="table-container">
                <h3>üö∂ √öltimas Sesiones (Paseo)</h3>
                <table id="paseoTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Usuario</th>
                            <th>Nivel</th>
                            <th>Aciertos</th>
                            <th>Meta</th>
                            <th>Precisi√≥n</th>
                            <th>Resultado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="7" class="loading">Cargando...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TAB: TRENES -->
        <div id="tab-train" class="tab-content">
            <div class="stats-grid">
                <div class="stat-card gradient-1">
                    <h3>Total Sesiones</h3>
                    <div class="value" id="trainTotal">-</div>
                    <span class="trend">üöÇ Trenes</span>
                </div>
                <div class="stat-card gradient-2">
                    <h3>Precisi√≥n Promedio</h3>
                    <div class="value" id="trainAccuracy">-%</div>
                    <span class="trend">üéØ Global</span>
                </div>
            </div>
            <div class="table-container">
                <h3>üöÇ √öltimas Sesiones (Trenes)</h3>
                <table id="trainTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Usuario</th>
                            <th>Velocidad</th>
                            <th>Colores</th>
                            <th>Aciertos</th>
                            <th>Errores</th>
                            <th>Fecha</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="7" class="loading">Cargando...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TAB: POR USUARIO -->
        <div id="tab-usuarios" class="tab-content">
            <div style="margin-bottom: 30px;">
                <label for="userSelect" style="display: block; margin-bottom: 10px; color: var(--text-secondary);">üë§
                    Seleccionar Usuario:</label>
                <select id="userSelect" class="custom-select" onchange="onUserSelected()">
                    <option value="">-- Seleccione un usuario --</option>
                </select>
            </div>

            <div id="emptyState" class="empty-state">
                <div class="empty-state-icon">üëÜ</div>
                <div class="empty-state-text">Selecciona un usuario</div>
                <div class="empty-state-subtext">Elige un usuario del men√∫ para ver sus estad√≠sticas</div>
            </div>

            <div id="gameCardsContainer" style="display: none;">
                <h3 id="selectedUserTitle" style="color: var(--accent-purple); margin-bottom: 20px;"></h3>

                <div class="game-cards">
                    <div class="game-card" onclick="showGameDetails('memoria')">
                        <div class="game-card-icon">üß†</div>
                        <div class="game-card-title">Juego de Memoria</div>
                        <div class="game-card-stats">
                            <div class="game-card-stat"><span class="game-card-stat-label">Total Sesiones:</span><span
                                    class="game-card-stat-value" id="memoriaTotalSessions">-</span></div>
                            <div class="game-card-stat"><span class="game-card-stat-label">Accuracy:</span><span
                                    class="game-card-stat-value" id="memoriaAccuracy">-%</span></div>
                            <div class="game-card-stat"><span class="game-card-stat-label">Completadas:</span><span
                                    class="game-card-stat-value" id="memoriaCompleted">-</span></div>
                        </div>
                    </div>
                    <div class="game-card" onclick="showGameDetails('abecedario')">
                        <div class="game-card-icon">üî§</div>
                        <div class="game-card-title">Abecedario</div>
                        <div class="game-card-stats">
                            <div class="game-card-stat"><span class="game-card-stat-label">Total Sesiones:</span><span
                                    class="game-card-stat-value" id="abecedarioTotalSessions">-</span></div>
                            <div class="game-card-stat"><span class="game-card-stat-label">Completadas:</span><span
                                    class="game-card-stat-value" id="abecedarioCompleted">-</span></div>
                            <div class="game-card-stat"><span class="game-card-stat-label">Tiempo Promedio:</span><span
                                    class="game-card-stat-value" id="abecedarioAvgTime">-s</span></div>
                        </div>
                    </div>
                    <div class="game-card" onclick="showGameDetails('paseo')">
                        <div class="game-card-icon">üö∂</div>
                        <div class="game-card-title">Paseo</div>
                        <div class="game-card-stats">
                            <div class="game-card-stat"><span class="game-card-stat-label">Total Sesiones:</span><span
                                    class="game-card-stat-value" id="paseoTotalSessions">-</span></div>
                            <div class="game-card-stat"><span class="game-card-stat-label">Victorias:</span><span
                                    class="game-card-stat-value" id="paseoVictoriasStats">-</span></div>
                            <div class="game-card-stat"><span class="game-card-stat-label">Precisi√≥n:</span><span
                                    class="game-card-stat-value" id="paseoPrecisionStats">-%</span></div>
                        </div>
                    </div>
                    <div class="game-card" onclick="showGameDetails('train')">
                        <div class="game-card-icon">üöÇ</div>
                        <div class="game-card-title">Trenes</div>
                        <div class="game-card-stats">
                            <div class="game-card-stat"><span class="game-card-stat-label">Total Sesiones:</span><span
                                    class="game-card-stat-value" id="trainTotalSessions">-</span></div>
                            <div class="game-card-stat"><span class="game-card-stat-label">Aciertos:</span><span
                                    class="game-card-stat-value" id="trainTotalCorrect">-</span></div>
                            <div class="game-card-stat"><span class="game-card-stat-label">Precisi√≥n:</span><span
                                    class="game-card-stat-value" id="trainPrecisionStats">-%</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detailed Views -->
            <div id="detailedMemoria" class="detailed-view">
                <div class="detailed-view-header">
                    <h3 class="detailed-view-title">üß† Sesiones de Memoria</h3>
                    <button class="back-btn" onclick="hideGameDetails()">‚Üê Volver</button>
                </div>
                <div class="table-container">
                    <table id="memoriaDetailTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Fecha</th>
                                <th>Dificultad</th>
                                <th>Pares</th>
                                <th>Accuracy</th>
                                <th>Tiempo</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="7" class="loading">Cargando...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="detailedAbecedario" class="detailed-view">
                <div class="detailed-view-header">
                    <h3 class="detailed-view-title">üî§ Sesiones de Abecedario</h3>
                    <button class="back-btn" onclick="hideGameDetails()">‚Üê Volver</button>
                </div>
                <div class="table-container">
                    <table id="abecedarioDetailTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Fecha</th>
                                <th>Palabra</th>
                                <th>Tiempo</th>
                                <th>Errores</th>
                                <th>Pistas</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="7" class="loading">Cargando...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="detailedPaseo" class="detailed-view">
                <div class="detailed-view-header">
                    <h3 class="detailed-view-title">üö∂ Sesiones de Paseo</h3>
                    <button class="back-btn" onclick="hideGameDetails()">‚Üê Volver</button>
                </div>
                <div class="table-container">
                    <table id="paseoDetailTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Fecha</th>
                                <th>Nivel</th>
                                <th>Aciertos</th>
                                <th>Meta</th>
                                <th>Precisi√≥n</th>
                                <th>Resultado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="7" class="loading">Cargando...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="detailedTrain" class="detailed-view">
                <div class="detailed-view-header">
                    <h3 class="detailed-view-title">üöÇ Sesiones de Trenes</h3>
                    <button class="back-btn" onclick="hideGameDetails()">‚Üê Volver</button>
                </div>
                <div class="table-container">
                    <table id="trainDetailTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Fecha</th>
                                <th>Velocidad</th>
                                <th>Colores</th>
                                <th>Aciertos</th>
                                <th>Errores</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="7" class="loading">Cargando...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/admin_dashboard.js"></script>
</body>

</html>